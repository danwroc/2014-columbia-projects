YUI.add("photoList-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{displayType:{readOnly:!0,defaultValue:"photo list"},title:{readOnly:!0,defaultFn:function(e){return"Photo list"}},url:{readOnly:!0,defaultFn:function(e){return""}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"photolist-"+e}},photoContextList:{isCollection:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photoList-getContext"],listItemIdField:"photoId"}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photoList-getContext-fetcher"]});
YUI.add("flickr-photoList-getContext-fetcher",function(e){"use strict";function t(t){var n={photo_id:t.photoId,photolist_id:t.id,num_prev:t.numPrev,num_next:t.numNext,extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a=[],f,l=s.proxy(n.photoId),c,h,p,d,v,m=[];return c=r.prevphotos,f=r.nextphotos,a=e.APIHelper.response.parsePhotos({photos:f.photo,personModelRegistry:o,photoModelRegistry:s}),u=e.APIHelper.response.parsePhotos({photos:c.photo,personModelRegistry:o,photoModelRegistry:s}),v=i.getValue(n.id,"photoContextList"),p=v.hasMinBoundary?v.hasMinBoundary():!1,d=v.hasMaxBoundary?v.hasMaxBoundary():!1,h=v.getList(),m=e.APIHelper.response.addOrReplaceListByContext({model:l,next:a,prev:u.reverse(),current:h,hasMin:p,hasMax:d,numNext:n.numNext,numPrev:n.numPrev}),i.setValue(n.id,"photoContextList",m),{next:a,previous:u.reverse()}}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photolist.getContext",this._processParams(t),!0),n.getModelRegistry("photoList-models"),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photoList-getContext-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photoList-getContext"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photoList-models","photo-models"]});
