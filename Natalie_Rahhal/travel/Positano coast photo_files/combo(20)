YUI.add("hermes-template-photo-ad-page",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["sidebar-view"],u):a.call(t,"outlet",t["sidebar-view"],u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-ad-page",function(e){return n(e,{partials:r})})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-ad-sidebar",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function d(e,t){var r="",i;return r+='width="',(i=n.customBrandIconWidth)?i=i.call(e,{hash:{},data:t}):(i=e.customBrandIconWidth,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function v(e,t){var r="",i;return r+='height="',(i=n.customBrandIconHeight)?i=i.call(e,{hash:{},data:t}):(i=e.customBrandIconHeight,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function m(e,t){var r="",i,s;return r+='\n<a href="'+l((i=(i=e.ad,i==null||i===!1?i:i.clickUrl),typeof i===f?i.apply(e):i))+'" class="find-out-more" data-track="ad_link_rail_panel" target="_blank">\n    <span>Find out more at</span>\n    <span class="brand">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=e.ad,i==null||i===!1?i:i.brand),s):c.call(e,"renderTrustedMarkup",(i=e.ad,i==null||i===!1?i:i.brand),s)))+'</span>\n    <img src="'+l((i=(i=e.ad,i==null||i===!1?i:i.buddyicon),typeof i===f?i.apply(e):i))+'" width="'+l((i=(i=e.ad,i==null||i===!1?i:i.buddyiconWidth),typeof i===f?i.apply(e):i))+'" height="'+l((i=(i=e.ad,i==null||i===!1?i:i.buddyiconHeight),typeof i===f?i.apply(e):i))+'">\n</a>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this,p=n.blockHelperMissing;s+='<a class="closeBtn" href="'+l((o=(o=t.next,o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'" data-track="sidebarCloseButtonClick">&times;</a>\n\n<div class="attribution-view">\n\n    <a class="attribution-icon" href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" data-track="ad_link_rail_icon" target="_blank">\n		<img src="'+l((o=(o=t.ad,o==null||o===!1?o:o.buddyicon),typeof o===f?o.apply(t):o))+'" ',u=n["if"].call(t,t.customBrandIconWidth,{hash:{},inverse:h.noop,fn:h.program(1,d,i),data:i});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,t.customBrandIconHeight,{hash:{},inverse:h.noop,fn:h.program(3,v,i),data:i});if(u||u===0)s+=u;s+='></a>\n\n    <div class="attribution-info">\n        <a href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" class="owner-name truncate" title="',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.brand),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.brand),a)))+'" target="_blank">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.brand),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.brand),a)))+'</a>\n        <a href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" class=\'ui-button ui-button-minimal\' data-track="ad_link_rail_button" target="_blank"><span>Sponsored</span></a>\n    </div>\n</div>\n\n<span id="ad-choices"></span>\n\n<a href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" data-track="ad_link_rail_title" target="_blank"><span class="photo-title">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.headline),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.headline),a)))+'</span></a>\n\n<div class="title-desc-block">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.summary),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.summary),a)))+'</div>\n\n<div class="view context-slider-view">\n    <div class="wrapper is-ready">\n        <div class="slider">\n            <a href="'+l((o=(o=t.previous,o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'" class="nav nav-l hide-text"><span></span></a>\n            <a class="context-thumb" href="'+l((o=(o=t.previous,o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'"\n               title="Gomez Mill House - Infrared" style="background-image: url('+l((o=(o=t.previous,o==null||o===!1?o:o.url),typeof o===f?o.apply(t):o))+');">&nbsp;</a>\n\n            <a class="context-thumb middle currentImage" href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" data-track="ad_link_rail_thumbnail" title="',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.headline),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.headline),a)))+'" target="_blank">Ad</a>\n\n            <a class="context-thumb" href="'+l((o=(o=t.next,o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'" title="Sunrise"\n               style="background-image: url('+l((o=(o=t.next,o==null||o===!1?o:o.url),typeof o===f?o.apply(t):o))+');">&nbsp;</a>\n            <a href="'+l((o=(o=t.next,o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'" class="nav nav-r hide-text"><span></span></a>\n        </div>\n    </div>\n\n    <div class="view photo-sidebar-actions-view">\n        <div class="view fave-view">\n            <a href="#" title="Fave this photo" class="button">\n                <span class="hide-text fave-star"></span>\n                <span class="fave-count"></span>\n            </a>\n        </div>\n        <div>\n            <a title="Comment" class="button comment" href="#">\n                <span class="ui-icon-comments">&nbsp;</span>\n                <span class="button-comment-count"></span>\n            </a>\n        </div>\n        <div>\n            <a title="Share this photo" class="button share ui-util-dialog-anchor" href="#">\n                <i class="ui-icon-share"></i>\n            </a>\n        </div>\n        <div class="view more-menu-view">\n            <a href="#" title="More Actions" class="button">\n                <span class="more-button hide-text">\u2026</span>\n            </a>\n        </div>\n    </div>\n\n</div>\n\n',a={hash:{},inverse:h.program(5,m,i),fn:h.noop,data:i},(u=n.adsTypeB)?u=u.call(t,a):(u=t.adsTypeB,u=typeof u===f?u.apply(t):u),n.adsTypeB||(u=
p.call(t,u,a));if(u||u===0)s+=u;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-ad-sidebar",function(e){return n(e,{partials:r})})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-sidebar-ad-view",function(e){e.namespace("Views")[this.name]=e.Base.create("photo-sidebar-ad-view",e.FlickrView,[],{initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.adJSON=this.appContext.adManager.getAdJSON(),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.appContext.flipper.isFlipped("context-slider")||delete this.subviewConfig["context-slider-view"],this},loadState:function(){return e.AutoResolvingPromise()},buildContainer:function(){var e,t;return t=this.setBrandLogoDimensions(this.adJSON),e=this.templates("photo-ad-sidebar")({ad:this.adJSON,previous:this.appContext.adManager.origin.arrow==="next"?this.appContext.adManager.context.current:this.appContext.adManager.context.previous,next:this.appContext.adManager.origin.arrow==="next"?this.appContext.adManager.context.next:this.appContext.adManager.context.current,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),customBrandIconHeight:t.height,customBrandIconWidth:t.width}),this.setContainerHTML(e),this},setBrandLogoDimensions:function(e){var t=55,n,r;return e.buddyiconWidth===e.buddyiconHeight?(n=t,r=t):e.buddyiconWidth>e.buddyiconHeight?(n=t,r=Math.round(t/(e.buddyiconWidth/e.buddyiconHeight))):(n=Math.round(t*(e.buddyiconWidth/e.buddyiconHeight)),r=t),{width:n,height:r}},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-ad-sidebar","photo-ad-sidebar-css","photo-sidebar-actions-css","context-slider-css","url-helper"],optional:["photo-title-desc-view","photo-sidebar-actions-view","photo-models","person-models"]});
YUI.add("photo-page-ad-view",function(e){e.namespace("Views")[this.name]=e.Base.create("photo-page-ad-view",e.FlickrView,[],{initializer:function(e){return this},subviewConfig:{"photo-well-view":{requiredToShow:!0},"photo-sidebar-ad-view":{requiredToShow:!0},"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},additionalViewClasses:function(){var e=[];return!this.appContext.getViewer().signedIn&&this.appContext.flipper.isFlipped("global-nav-enabled")&&e.push("has-global-nav"),e},buildContainer:function(){var e,t,n,r;try{n=this.appContext.adManager.getAdJSON(),t=n.clickUrl}catch(i){this.appContext.fatal("There was a problem processing the ad payload",{error:i,payload:n}),t="#"}return this.appContext.getViewer().signedIn?r="":this.appContext.flipper.isFlipped("global-nav-enabled")&&(r=this.subviews["global-nav-view"].get("container")),e=this.templates("photo-ad-page")({"sidebar-view":this.subviews["photo-sidebar-ad-view"].get("container"),"photo-well-view":this.subviews["photo-well-view"].get("container"),clickUrl:t,"global-nav-view":r}),this.setContainerHTML(e),this},activate:function(){return this.appContext.adManager.adIsLoading(),this.setupPerformanceMetrics(),this},setupPerformanceMetrics:function(){}},{ATTRS:{spaceid:{value:792600517}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-ad-page","photo-ad-css","util-css","fletrics","signin-helper","dialog"],optional:["photo-well-view","photo-sidebar-ad-view","global-nav-view"]});
