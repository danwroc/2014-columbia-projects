YUI.add("flickr-photos-licenses-setLicense-updater",function(e){"use strict";function t(e,t){var n={};return n.photo_id=e.photoId,n.license_id=e.license,t.callAPI("flickr.photos.licenses.setLicense",n).then(null,function(e){throw t[e.fatal?"error":"debug"]("[flickr-photos-licenses-setLicense-updater] failed getting or processing API response:",e),e})}e.namespace("ModelUpdaters")["flickr-photos-licenses-setLicense"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setSafetyLevel-updater",function(e){"use strict";function t(e,t){var n={};return n.photo_id=e.photoId,n.safety_level=e.safetyLevel+1,t.callAPI("flickr.photos.setSafetyLevel",n).then(null,function(e){throw t[e.fatal?"error":"debug"]("[flickr-photos-setSafetyLevel-updater] failed getting or processing API response:",e),e})}e.namespace("ModelUpdaters")["flickr-photos-setSafetyLevel"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[];return("title"in n||"description"in n)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license.newVal},this.appContext)),"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:n.safetyLevel.newVal},this.appContext)),e.batch.apply(null,r)}},attributes:{owner:{isModel:!0},title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},mediaType:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:"photo"},isVideo:{readOnly:!0,derivedBy:["mediaType"],getter:function(e,t){var n=this.getValue(t,"mediaType");return n==="video"}},isOwner:{readOnly:!0,derivedBy:["owner"],getter:function(e,t){var n=this.getValue(t,"owner"),r=this.appContext.getViewer();return!!r.signedIn&&n.getValue("id")===r.nsid}},sizes:{},secret:{},needsInterstitial:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},canAddMeta:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},license:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/"+e:undefined}}},getLargestSize:function(e){return this.getSizeToFit(e,{width:Number.MAX_VALUE,height:Number.MAX_VALUE})},getSizeToFit:function(t,n,r){r=r||{};var i=this,s,o=n.width,u=n.height,a=!!r.cropToFit,f=this.getValue(t,"sizes"),l=r.excludeSizes||["o"],c=r.includeSizes||Object.keys(f),h,p,d;return this._getSizeToFitMemo=this._getSizeToFitMemo||{},s=[t,o,u,a,l.sort().join(""),c.sort().join("")].join("_"),this._getSizeToFitMemo[s]||(e.Object.each(f,function(e,n){var r,i,s,f,v,m;if(e&&l.indexOf(n)===-1&&c.indexOf(n)>-1)if(!this.isSizeSquare(n)||this.isPhotoSquare(t)){r=parseInt(e.width,10),i=parseInt(e.height,10),a&&r>=o&&i>=u?s=!0:!a&&(r>=o||i>=u)&&(s=!0),s&&(h?(f=parseInt(h.height,10),i<f&&(h=e)):h=e);if(p){v=parseInt(p.width,10),m=parseInt(p.height,10);if(r>v||i>m)p=e}else p=e}d=h||p},this),this._getSizeToFitMemo[s]=d,this._getSizeToFitMemoTimer||(this._getSizeToFitMemoTimer=setTimeout(function(){delete i._getSizeToFitMemo,delete i._getSizeToFitMemoTimer},1e4))),this._getSizeToFitMemo[s]},isSizeSquare:function(e){var t={sq:"sq",q:"q"};return!!t[e]},isPhotoSquare:function(t){var n;return this._isPhotoSquareMemo=this._isPhotoSquareMemo||{},typeof this._isPhotoSquareMemo[t]!="undefined"?n=this._isPhotoSquareMemo[t]:(n=!0,e.Object.some(this.getValue(t,"sizes"),function(e,t){var r;if(e&&e.width&&e.height&&!this.isSizeSquare(t)){r=parseInt(e.width,10)/parseInt(e.height,10);if(r!==1)return n=!1,!0}},this),this._isPhotoSquareMemo[t]=n),n}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-setPerms-updater","flickr-photos-setMeta-updater","flickr-photos-licenses-setLicense-updater","flickr-photos-setSafetyLevel-updater","attribute-helpers"]});
YUI.add("tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{create:function(t){return e.ModelCreators["flickr-photos-addTags"].run(t,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-removeTag"].run(t,this.appContext)}},attributes:{tagValue:{setter:function(e){return e.trim().replace(/\s/g,"")}},tagRaw:{},tagAuthorNSID:{},isMachineTag:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},url:{derivedBy:["tagValue"],readOnly:!0,defaultFn:function(e){var t=this.getValue(e,"tagValue");return t?"/photos/tags/"+t:undefined}},searchUrl:{derivedBy:["tagValue"],readOnly:!0,defaultFn:function(e){var t=this.getValue(e,"tagValue");return t?"/search/?q="+t+"&m=tags":undefined}}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("flickr-photos-removeTag-deletor",function(e){"use strict";function t(e,t){var n={};return n.tag_id=e,t.callAPI("flickr.photos.removeTag",n).then(null,function(e){throw t[e.fatal?"error":"debug"]("[flickr-photos-removeTag-deletor] failed getting or processing API response:",e),e})}e.namespace("ModelDeletors")["flickr-photos-removeTag"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("photo-tags-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-tags-getListPhoto"].run(t,this.appContext)},create:function(t){return e.ModelCreators["flickr-photos-addTags"].run(t,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-removeTag"].run(t,this.appContext)}},attributes:{tags:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-tags-getListPhoto-fetcher","flickr-photos-addTags-creator","flickr-photos-removeTag-deletor"]});
YUI.add("flickr-tags-getListPhoto-fetcher",function(e){"use strict";function t(t,n,r){var i=t[0],s=t[1],o=t[2],u=i.photo&&i.photo.tags&&typeof i.photo.tags.tag!="undefined"?i.photo.tags.tag.length:0,a=[];return u>0&&e.Array.each(i.photo.tags.tag,function(e){typeof e.content=="string"&&(o.exists(e.id)||o.add({id:e.id,tagRaw:e.raw,tagValue:r.isFlipped("tags-charm")?e.content:e.content.replace(/\s/g,""),tagAuthorNSID:e.author,isMachineTag:e.machineTag}),a.push(o.proxy(e.id)))}),s.exists(n)?s.setValue(n,"tags",a):s.add({id:n,tags:a}),s.proxy(n)}function n(t,n){var r=t.id,i={photo_id:r},s=this;return e.batch(n.callAPI("flickr.tags.getListPhoto",i),n.getModelRegistry("photo-tags-models"),n.getModelRegistry("tag-models")).then(function(e){return s._processResponse(e,r,n.flipper)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-tags-getListPhoto-fetcher] failed getting or processing API response:",e),e})}e.namespace("ModelFetchers")["flickr-tags-getListPhoto"]={run:n,_processResponse:t}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["tag-models","photo-tags-models"]});
YUI.add("flickr-photos-addTags-creator",function(e){"use strict";function t(e){e.tags=e.tags||[];var t={};return t.photo_id=e.photoId,t.tags=e.tags,t}function n(e,t){var n=e[0],r=e[1],i=e[2],s=[];return n.tags.tag.forEach(function(e){i.exists(e.id)||i.add({id:e.id,tagRaw:e.raw,tagValue:e.content.replace(/\s/g,""),tagAuthorNSID:e.author}),s.push(i.proxy(e.id))}),r.exists(t.photoId)?s.forEach(function(e){r.getValue(t.photoId,"tags").appendToList(e)}):r.add({id:t.photoId,tags:s}),s}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photos.addTags",this._processParams(t)),n.getModelRegistry("photo-tags-models"),n.getModelRegistry("tag-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photos-addTags-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photos-addTags"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"],optional:["photo-tags-models","tag-models"]});
YUI.add("flickr-photosets-addPhoto-creator",function(e){"use strict";function t(t,n){var r={};return r.photo_id=t.photoID,r.photoset_id=t.setID,e.batch(n.callAPI("flickr.photosets.addPhoto",r),n.getModel("set-models",t.setID),n.getModel("photo-models",t.photoID)).then(function(e){var t=e[0],n=e[1],r=e[2];if(t.stat==="ok")return n.addPhoto(r),n},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-addPhoto-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-addPhoto"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-photosets-removePhoto-deletor",function(e){"use strict";function t(t,n){var r={};return r.photo_id=t.photoID,r.photoset_id=t.setID,e.batch(n.callAPI("flickr.photosets.removePhoto",r),n.getModel("set-models",t.setID),n.getModel("photo-models",t.photoID),n.getModel("sets-models",n.getViewer().nsid)).then(function(e){var n=e[0],r=e[1],i=e[3],s=e[2];if(n.stat==="ok")return r.removePhoto(s),r.getValue("photoCount")<1?(i.getValue("sets").removeFromList(t.setID),r.registry.remove(t.setID),null):r},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-removePhoto-deletor] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-removePhoto"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-photosets-create-creator",function(e){"use strict";function t(t,n){var r={};return r.title=t.title,r.description=t.description,r.primary_photo_id=t.photoID,r.full_result=1,e.batch(n.callAPI("flickr.photosets.create",r),n.getModelRegistry("set-models"),n.getModel("photo-models",t.photoID),n.getModel("person-models",n.getViewer().nsid),n.getModel("sets-models",n.getViewer().nsid)).then(function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o;return t.photoset.id?(o=n.add({id:t.photoset.id,title:t.photoset.title.content,description:t.photoset.description.content,photoPageList:[r],photoContextList:[r],owner:i,url:t.photoset.url,primary:{m:t.photoset.primary_photo_extras.urlM,s:t.photoset.primary_photo_extras.urlS,sq:t.photoset.primary_photo_extras.urlSq,t:t.photoset.primary_photo_extras.urlT},photoCount:t.photoset.photos}),s.getValue("sets").prependToList(o),o):!1},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-create-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-create"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("set-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photosets-getPhotos"].run(t,this.appContext)},create:function(t,n){return e.ModelCreators["flickr-photosets-create"].run(t,n)},addPhoto:function(t,n){return e.ModelCreators["flickr-photosets-addPhoto"].run(t,n)},removePhoto:function(t,n){return e.ModelCreators["flickr-photosets-removePhoto"].run(t,n)}},addPhoto:function(e,t){return this.getValue(e,"photoPageList").hasMaxBoundary()&&this.getValue(e,"photoPageList").appendToList(t),this.getValue(e,"photoContextList").hasMaxBoundary()&&this.getValue(e,"photoContextList").appendToList(t),this.setValue(e,"photoCount",this.getValue(e,"photoCount")+1),this},removePhoto:function(e,t){return this.getValue(e,"photoPageList").removeFromList(t.getValue("id")),this.getValue(e,"photoContextList").removeFromList(t.getValue("id")),this.setValue(e,"photoCount",this.getValue(e,"photoCount")-1),this},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"set"}},title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},owner:{isModel:!0},photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photosets-getPhotos"]}},photoContextList:{isCollection:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photosets-getContext"],listItemIdField:"photoId"}},photoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},primary:{},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/sets/"+e:undefined}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"set-"+e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-addPhoto-creator","flickr-photosets-removePhoto-deletor","flickr-photosets-getPhotos-fetcher","flickr-photosets-getContext-fetcher","flickr-photosets-create-creator"]});
YUI.add("flickr-photosets-getPhotos-fetcher",function(e){"use strict";function t(t){t.page=t.page||1,t.perPage=t.perPage||100;var n={photoset_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras(),per_page:t.perPage,page:t.page,get_user_info:1};return n}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u={id:n.id,title:r.photoset.title,photoList:[]},a,f,l=[],c=!1,h=!1;return u.owner=e.APIHelper.response.parsePerson(r.user),s.exists(u.owner.id)||s.add(u.owner),u.owner=s.proxy(u.owner.id),o.exists(n.id)&&(a=o.getValue(n.id,"photoPageList"),c=a.hasMinBoundary?a.hasMinBoundary():!1,h=a.hasMaxBoundary?a.hasMaxBoundary():!1,l=a.getList()),f=e.APIHelper.response.parsePhotos({photos:r.photoset.photo,ownerID:r.photoset.owner,personModelRegistry:s,photoModelRegistry:i}),u.photoPageList=e.APIHelper.response.addOrReplaceListByPage({current:l,perPage:n.perPage,pageNum:n.page,hasMax:h,hasMin:c,totalItems:r.photoset.total,newPages:f}),u.photoList.length&&(u.primary=r.photoset.primary),o.exists(u.id)?o.setValue(n.id,"photoPageList",u.photoPageList):o.add(u),f}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photosets.getPhotos",this._processParams(t),!0),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models"),n.getModelRegistry("set-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-getPhotos-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photosets-getPhotos"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models","person-models","set-models"]});
YUI.add("flickr-photosets-getContext-fetcher",function(e){"use strict";function t(t,n){var r={photoset_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras(),photo_id:t.photoId,num_prev:t.numPrev,num_next:t.numNext,get_photoset_info:1};return r}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a=[],f=s.proxy(n.photoId),l,c,h,p,d,v,m=[];return l=r.prevphotos,c=r.nextphotos,a=e.APIHelper.response.parsePhotos({photos:l.photo,personModelRegistry:o,photoModelRegistry:s}),u=e.APIHelper.response.parsePhotos({photos:c.photo,personModelRegistry:o,photoModelRegistry:s}),d=i.getValue(n.id,"photoContextList"),h=d.hasMinBoundary?d.hasMinBoundary():!1,p=d.hasMaxBoundary?d.hasMaxBoundary():!1,v=d.getList(),m=e.APIHelper.response.addOrReplaceListByContext({model:f,next:a,prev:u.reverse(),current:v,hasMin:h,hasMax:p,numNext:n.numNext,numPrev:n.numPrev}),i.setValue(n.id,"photoContextList",m),{next:a,previous:u.reverse()}}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photosets.getContext",this._processParams(t,n),!0),n.getModelRegistry("set-models"),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-getContext-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photosets-getContext"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["set-models","photo-models"]});
YUI.add("photostream-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-people-getPhotos"].run(t,this.appContext)}},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"photostream"}},title:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.appContext.getViewer(),n;return t&&t.nsid===e?"Your photostream":(n=this.getValue(e,"owner"),n?n.getValue("displayname")+"'s photostream":"Photostream")}},owner:{isModel:!0},photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getPhotos"]}},photoContextList:{isCollection:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photos-getContext"],listItemIdField:"photoId"}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner"),n=t?t.getValue("pathAlias"):e;return"/photos/"+n+"/"}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"photostream"}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getContext-fetcher","flickr-people-getPhotos-fetcher"]});
YUI.add("flickr-photos-getContext-fetcher",function(e){"use strict";function t(t,n){var r={photo_id:t.photoId,num_prev:t.numNext,num_next:t.numPrev,extras:e.APIHelper.request.getRebootPhotoExtras().concat(["can_download","can_share"])};return r}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a=[],f=s.proxy(n.photoId),l=f.getValue("owner"),c,h,p,d,v,m,g=[];return c=r.prevphotos,h=r.nextphotos,a=e.APIHelper.response.parsePhotos({photos:c.photo,existingPerson:l,photoModelRegistry:s}),u=e.APIHelper.response.parsePhotos({photos:h.photo,existingPerson:l,photoModelRegistry:s}),d=i.getValue(n.id,"photoContextList"),v=d.hasMinBoundary?d.hasMinBoundary():!1,m=d.hasMaxBoundary?d.hasMaxBoundary():!1,p=d.getList(),g=e.APIHelper.response.addOrReplaceListByContext({model:f,next:a,prev:u.reverse(),hasMin:v,hasMax:m,current:p,numNext:n.numNext,numPrev:n.numPrev}),c.photo.concat(h.photo).forEach(function(e){o.exists(e.id)||o.add({id:e.id,ownerNsid:e.owner,isFaved:e.isfavorite||!1,canShare:e.canShare,canDownload:e.canDownload,commentCount:e.countComments,faveCount:e.countFaves})}),i.setValue(n.id,"photoContextList",g),{next:a,previous:u.reverse()}}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photos.getContext",this._processParams(t,n),!0),n.getModelRegistry("photostream-models"),n.getModelRegistry("photo-models"),n.getModelRegistry("photo-engagement-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photos-getContext-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photos-getContext"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photostream-models","photo-models"]});
YUI.add("flickr-people-getPhotos-fetcher",function(e){"use strict";function t(t){var n={user_id:t.id,per_page:t.perPage||20,page:t.page||1,extras:e.APIHelper.request.getRebootPhotoExtras(),get_user_info:1};return n}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a,f=!1,l=!1,c,h={id:n.id};return h.owner=e.APIHelper.response.parsePerson(r.user),s.exists(h.owner.id)||s.add(h.owner),h.owner=s.proxy(h.owner.id),o.exists(h.id)&&(a=o.getValue(n.id,"photoPageList"),f=a.hasMinBoundary?a.hasMinBoundary():!1,l=a.hasMaxBoundary?a.hasMaxBoundary():!1,u=a.getList()),c=e.APIHelper.response.parsePhotos({photos:r.photos.photo,ownerID:r.photos.owner,personModelRegistry:s,photoModelRegistry:i}),h.photoPageList=e.APIHelper.response.addOrReplaceListByPage({current:u,perPage:n.perPage,pageNum:n.page,hasMax:l,hasMin:f,totalItems:r.photos.total,newPages:c}),o.exists(h.id)?o.setValue(h.id,"photoPageList",h.photoPageList):o.add(h),c}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.people.getPhotos",this._processParams(t),!0),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models"),n.getModelRegistry("photostream-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-people-getPhotos-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-people-getPhotos"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models","person-models","photostream-models"]});
/*
YUI 3.13.0 (build 508226d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.13.0",{requires:["base-base","pluginhost"]});
/*
YUI 3.13.0 (build 508226d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"3.13.0",{requires:["yui-base"]});
YUI.add("flickr-view",function(e){e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,langBundles:{value:[]},initializer:function(e){return this.appContext=e.appContext,delete e.appContext,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this._params=e||{},this.subviews={},this._eventHandles=[],this},initialize:function(e){var t=this;return this.serverRendered=e&&e.serverRendered?e.serverRendered:!1,YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",function(e){t.updateHead(),t.canActivate()&&(t.activate(),t.isActivated=!0,t.activateSubviews())})),this.setupSubviews().then(function(){var e=t.loadState();if(!e)throw new Error("View "+t.name+" loadState function does not return a promise");return e},function(e){throw e}).then(function(){(YUI.Env.isServer||!t.get("container").hasClass("requiredToShowOnServer"))&&t.buildContainer(),t.isBuilt=!0}).then(function(){return t.buildHeadContainer(),YUI.Env.isServer||(t.updateHead(),t.canActivate()&&(t.activate(),t.isActivated=!0,t.activateSubviews())),t})},render:function(){return this},buildHeadContainer:function(){return this},attachKeyEvent:function(e,t,n){this.registerEventHandler(this.appContext.getKeyboardManager().on(e,n||this._params.keyEventScope||"*",t.bind(this)))},setContainerHTML:function(e){var t=this;return this.get("container").setHTML(e),YUI.Env.isServer||Object.keys(this.subviews).forEach(function(e,n,r){var i=t.subviews[e].get("container"),s=t.get("container").one("#"+i._yuid);s&&s.replace(i)}),this},setupSubviews:function(){var t=this,n,r=[],i,s={};return this.subviewConfig?(Object.keys(this.subviewConfig).forEach(function(e){if(typeof t.subviewConfig[e].disabled=="undefined"||(typeof t.subviewConfig[e].disabled=="function"?!t.subviewConfig[e].disabled.call(t):!t.subviewConfig[e].disabled))s[e]=t.subviewConfig[e]}),n=Object.keys(s).map(function(n){YUI.Env.isServer?i=s[n].requiredToShowOnServer||s[n].requiredToShow:i=s[n].requiredToShowOnClient||s[n].requiredToShow;var o=e.merge(t._params,s[n]);i?r.push(t.instantiateSubview(n,o).then(function(e){return t.setupSubview(n,o,e)})):r.push(t.instantiateSubview(n,o).then(function(e){YUI.Env.isServer||t.setupSubview(n,o,e)}))}).filter(function(e){return!!e}),r.length?e.batch.apply(this,r):new e.AutoResolvingPromise):new e.AutoResolvingPromise},instantiateSubview:function(e,t){var n=this;return t.container=this.getContainer({subviewName:e,subviewParams:t}),this.appContext.getView(e,t).then(function(t){return n.subviews[e]=t,t._params.keyEventScope=n._params.keyEventScope,t})},defferedSubviewInstantiation:function(e,t){var n=this;return this.instantiateSubview(e,t).then(function(e){return e.initialize()}).then(function(t){n.subviews[e]=t,t.buildContainer(),(n.subviewConfig[e].additionalViewClasses||[]).forEach(function(e){t.get("container").addClass(e)}),n.buildContainer(),n.activate()})},setupSubview:function(t,n,r){var i=this;return n=e.merge(n||{}),n.alreadyRendered=i.alreadyRendered,r.initialize(n).then(function(){return i.subviews[t]},function(e){if(n.requiredToShowOnServer||n.requiredToShowOnClient)throw e;i.appContext.error("Error getting/initializing view ",t," of ",i.name,e.message,e.stack),i.appContext.error(e.message),i.appContext.error(e.stack)})},attachEvents:function(e){if(!e)return;var t={},n=this;Object.keys(e).forEach(function(r){var i,s;i={selector:(r.match(/([\w-_\#\.\[\]~|$^*= ]+) /i)||[])[1]||"[data-action]",type:(r.match(/([\w]+):/i)||[])[1]||"click",action:(r.match(/:([\w]+)/i)||[])[1]||"_default_"},s=i.selector+"/"+i.type,t[s]||(t[s]={},n.registerEventHandler(n.get("container").delegate(i.type,function(e){var r,o,u,a;r=e.target.ancestor(i.selector,!0);if(i.type==="click"){o=e.target.ancestor(".server-only-link",!0);if(o){window.location=o.get("href");return}}if(!r)return;u=r.getData()||{},a=u.action||"_default_";if(!t[s].hasOwnProperty(a))return;if(!t[s][a])throw new Error('Handler for "'+a+'" UI event is undefined');t[s][a].call(n,e,u)},i.selector))),t[s][i.action]=e[r]})},registerEventHandler:function(t){e.Lang.isFunction(t.detach)&&this._eventHandles.push(t)},detachRegisteredEvent:function(t){var n=this._eventHandles.indexOf(t);n!==-1&&e.Lang.isFunction(t.detach)&&(t.detach(),this._eventHandles.splice(n,1))},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach(function(e){e.detach()}),this._eventHandles=[])},generateSignature:function(t,n){var r={},i;return e.Object.each(n,function(e,t){t!=="container"&&t!=="appContext"&&t!=="context"&&t!=="parentView"&&typeof e!="function"&&(r[t]=e)}),i=t+"__"+Object.keys(r).sort().map(function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(r[e])}).join("__"),i},getContainer:function(t){t=t||{},t.subviewParams=t.subviewParams||{};var n,r,i=["view",t.subviewName||this.name],s=t.subviewName?t.subviewParams.additionalViewClasses:this.additionalViewClasses,o,u=t.subviewParams.preferredViewTag||"div";return(t.subviewParams.requiredToShowOnServer||t.subviewParams.requiredToShow)&&YUI.Env.isServer&&i.push("requiredToShowOnServer"),e.Lang.isArray(s)&&s.length?i=i.concat(s):e.Lang.isFunction(s)&&(o=s.call(this),e.Lang.isArray(o)&&o.length&&(i=i.concat(o))),i=' class="'+i.join(" ")+'"',t.subviewName&&t.subviewParams&&(n=this.generateSignature(t.subviewName,t.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){return e==="outerHTML"?"<"+u+" "+i+(n?' data-view-signature="'+n+'"':"")+">"+this.html+"</"+u+">":null},hasChildNodes:function(){return!1},addClass:function(e){i=i.slice(0,-1)+" "+e+'"'},appendChild:function(e){this.html+=e.html},all:function(){return{each:function(){}}},one:function(){return null}}:(n&&(r=this.get("container").one('[data-view-signature="'+n+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+
u+" "+i+"></"+u+">")),r},renderSubviews:function(){var e={},t=this;return Object.keys(this.subviews).forEach(function(e,n,r){try{t.subviews[e].render()}catch(i){t.appContext.error("Error rendering view",e,"of",t.name,i.message,i.stack)}}),e},templates:function(t){var n=e.Template.get("hermes/"+t),r={},i=this.appContext.lang||"en-US";return typeof n!="function"&&this.appContext.error("Template not found:",t),i&&this.langBundles.length&&e.Array.each(this.langBundles,function(t){r[t]=e.Intl.get("hermes/"+t,null,i)}),function(e){return e=e||{},e.langTokens=e.langTokens||function(){return r},e.i18n=e.i18n||r,e.lang=e.lang||function(){return i},n(e)}},loadState:function(){return new e.AutoResolvingPromise},updateHead:function(){this.get("headContainer")&&this.get("headContainer").trim()!==""&&(e.one("head").all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return this.isBuilt&&(this.isActivated||this.isActiveAndInDOM()&&(e=!0)),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&this.appContext.flapp.get("activeView").get("container").contains(e)&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,t,n=this;for(e in this.subviews){t=n.subviews[e];try{t.canActivate()&&(t.activate(),t.recursivelyActivateSubviews(),t.isActivated=!0)}catch(r){this.appContext.error("Error activating view ",e," of ",this.name,r.message,r.stack)}}return this},recursivelyActivateSubviews:function(e){var t,n,r=e||this.subviews,i=this;for(t in r){n=r[t];if(n.canActivate())try{n.activate(),n.isActivated=!0,i.recursivelyActivateSubviews(n.subviews)}catch(s){this.appContext.error("Error activating view ",n," of ",this.name,s.message,s.trace)}}return this},getTrackingSegments:function(){return{}},destroy:function(t){this.set("destroyed",!0);var n=this.get("container");return this.detachRegisteredEvents(),e.Node&&n&&(n.detach&&n.detach(),t&&(t.remove||t["delete"])&&n.remove&&n.remove(!0),this.set("container",null)),this.destroySubviews(),e.FlickrView.superclass.destroy.call(this)},beforeDestroy:function(){var e=this;Object.keys(this.subviews).forEach(function(t,n,r){e.subviews[t].beforeDestroy()})},destroySubviews:function(){var e=this;Object.keys(this.subviews).forEach(function(t,n,r){e.subviews[t].destroy()})}},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},spaceid:{value:792600503,validator:function(t){return e.Lang.isNumber(t)||e.Lang.isString(t)},setter:function(e){return parseInt(e,10)}},trackedElementIDs:{value:[],validator:function(t){return e.Lang.isArray(t)}}}})},"@VERSION@",{requires:["base","template-base","flickr-promise","handlebars-helpers"]});
YUI.add("hermes-template-photo-page",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["sidebar-view"],u):a.call(t,"outlet",t["sidebar-view"],u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-page",function(e){return n(e,{partials:r})})},"@VERSION@",{requires:["template-base","handlebars-base"]});
/*
YUI 3.13.0 (build 508226d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.13.0",{requires:["base-base"]});
YUI.add("ttfp-recorder-plugin",function(e,t){"use strict";function r(e){r.superclass.constructor.apply(this,arguments)}var n="time_to_first_photo";r.NAME=r.NS="TTFPRecorderPlugin",r.ATTRS={selector:{value:""}},e.extend(r,e.Plugin.Base,{initializer:function(e){this.set("selector",e.selector),this.afterHostMethod("setContainerHTML",this._doAfterSetContainerHTML,this)},destructor:function(){},setSelector:function(e){this.set("selector",e)},testImageResolver:function(e){return function(t,r){var i=new Image;i.onload=function(){e.inDoc()||r("No longer exists in page"),i.onloadFired&&t(),i.onloadFired=!0,t(n)},i.onerror=function(){r("Failed to load image")},i.src=e.getAttribute("src"),i.complete&&(i.onloadFired=!0,t(n))}},_doAfterSetContainerHTML:function(){var e,t,n,r;r=this.get("host"),e=r.get("container"),r&&r.appContext&&r.appContext.clientMetrics&&e&&(t=e.one(this.get("selector")),n=r.appContext.clientMetrics,t&&(n.setPendingMark(this.testImageResolver(t)),n.beaconLater()))}}),e.namespace("Plugin.FlickrView").TTFPRecorderPlugin=r},"@VERSION@",{requires:["plugin"]});
YUI.add("signin-helper",function(e){function t(t,n){e.FlickrStorage.store(t,n)}function n(e){var n="fave";t(n,e),a(n)}function r(e){var t="comment";a(t)}function i(e){var n="share";t(n,e),a(n)}function s(t){var n,r,i=[];if(!t)return;if(e.FlickrStorage.hasEntries()){n=e.FlickrStorage.retrieve();for(r in n)o(t,n[r])||i.push(n[r])}return e.FlickrStorage.remove(),i}function o(e,t){var n=t.key,r=t.value;switch(n){case"fave":return u(e,r),!0;case"share":return!1}}function u(e,t){var n=t.id,r=e.getModelRegistry("photo-engagement-models");r.then(function(e){var t=e.proxy(n);t.registry.addAsFave(n)&&t.remoteUpdate()})}function a(t,n){var r=e.config.win.location.href;n=n||"http://www.flickr.com/signin/yahoo/",e.config.win.location=n+"?redir="+encodeURIComponent(r)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(e,t){try{var n=[];localStorage[this._storageKey]&&(n=this.retrieve()),n.push({key:e,value:t}),localStorage[this._storageKey]=JSON.stringify(n)}catch(r){}},retrieve:function(){var e={};try{e=JSON.parse(localStorage[this._storageKey])}catch(t){}return e},remove:function(){try{localStorage.removeItem(this._storageKey)}catch(e){}},hasEntries:function(){var e=!1;try{e=typeof localStorage[this._storageKey]!="undefined"}catch(t){}return e}},e.SigninHelper={savePreLoginAction:t,addPendingFave:n,addPendingComment:r,addPendingShare:i,checkPendingQueue:s,_redirectToSignin:a}},"@VERSION@");
YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,i={transitionTimeout:2e3};t=e.flutil={xbrowser:{transition:function(){var e,t,i,s;e={cssPropName:null,transitionendEventName:null};if(!r)return e;t=[["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"],["MSTransition","msTransitionEnd"],["transition","transitionEnd"]];if(n.getComputedStyle){s=n.getComputedStyle(r.createElement("div"));while(t.length){i=t.shift();if(s[i[0]]!==undefined)return e.cssPropName=i[0],e.transitionendEventName=i[1],e}}return e}()},getLogger:function(t){return t?e.Flog:{log:function(){}}},dump:function(){var e=[].slice.call(arguments),t=typeof e[0]=="string"?e.shift():"LOG";e.unshift("color: #FC0"),e.unshift("%c["+t+"]"),console.log.apply(console,e)},perf:function(e){var t={};try{e.now()}catch(n){e={now:function(){return(new Date).getTime()}}}return{start:function(n){t[n||"perf"]=e.now()},end:function(n){var r=e.now()-t[n||"perf"];n||(n="perf"),delete t[n],console.log(n,(r*1e3|0)/1e3,"ms")}}}(typeof window=="undefined"?{}:window.performance),extend:function(e){return e||(e={}),Array.prototype.slice.call(arguments,1).forEach(function(t){if(!t)return;for(var n in t)e[n]=t[n]}),e},objectCreate:function(e,n){var r,i;return r=function(){},r.prototype=e,i=new r,n?t.extend(i,n):i},throttle:function(e,t){var n=function(){if(n._t){n._q=!0;return}n._t=setTimeout(function(){n._t=null,n._q&&n(),n._q=null},t),e()};return n},onTransitionEnd:function(e,r){if(!r)return;var s,o,u;e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.cssPropName];if(!u||u.match(/none/))return r();o=function(){clearTimeout(s),e.removeEventListener(t.xbrowser.transition.transitionendEventName,o),r()},s=setTimeout(o,i.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionendEventName,o)},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},setCookie:function(t){if(!t.cookieName||typeof t.cookieValue=="undefined"||!t.path)throw new Error("[flutil.setCookie] Missing important parameters to set a cookie");var n=t.cookieName,r=t.cookieValue,i=t.domain||".flickr.com",s=t.path,o=t.expiresMonthsFromNow||3,u=e.Lang.isNumber(t.expires)?t.expires:e.moment().add("months",o).toDate();t.remove&&e.Cookie.remove(n,{path:s}),e.Cookie.set(n,r,{domain:i,path:s,expires:u})},createFragment:function(e){var t=r.createElement("div"),n=r.createDocumentFragment(),i;t.innerHTML=e;while(i=t.firstChild)n.appendChild(i);return n},constrainToValues:function(e,t){return t.indexOf(e)<0?t[0]:e},escapeInput:function(e,t){var n;if(!r)return e;if(!e&&typeof e!="number")return"";t||(t="text");if(t==="html")return n=r.createElement("div"),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="text")return n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/ig," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="numericstring")return(e+"").replace(/[^\d]/,"")},getTemplate:function(t){var n=null,r;return r=e.Template.get("hermes/"+t),r?n=r:e.Flog.error("Could not find template",t),n},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r=n.split(/=/),i;return i=r[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t),i!==undefined&&i!==null?i+"":r[1]||""}).trim()},createHashCode:function(e){var t,n="0000000000";return typeof e!="object"?t=e+"":t=Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(r){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0).toString().replace(/^-/,""),n.slice(0,-1*t.length)+t},camelCaseifyKeys:function(e){return Object.keys(e).reduce(function(n,r){return n[t.camelCaseify(r)]=e[r],n},{})},camelCaseify:function(e){return e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},openPopupWindow:function(t,n){var r,i,s,o,u,a;if(typeof window=="undefined")return;i=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),s=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0),s.top||(s.top=(i.screen.height-s.height)/2|0),s.left||(s.left=(i.screen.width-s.width)/2|0),r=Object.keys(s).map(function(e){var t=s[e];return typeof t=="boolean"&&(t=t?"yes":"no"),e+"="+t}).join(","),i=i.open(t,n.name,r),i.focus();if(n.onUrlChange||n.onClose)o="_start_",a=setInterval(function(){if(!i.location){clearInterval(a),n.onClose&&n.onClose();return}try{u=i.location.href||"x-origin"}catch(e){i.postMessage("","https://www.flickr.com")}if(u===o)return;o=u,n.onUrlChange&&n.onUrlChange(u)},1e3);return i},parseYYYYMMDDDatestamp:function(t){return!e.Lang.isString(t)||t.length!==8?null:Date.parse(t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2))},photoCoords:{normalize:function(e,t,n,r){return{x:e/500,y:t/375,w:n/500,h:r/375}},denormalize:function(e){return{x:e.x*500,y:e.y*375,w:e.w*500,h:e.h*375}},denormX:function(e){return e.x*500},denormY:function(e){return e.y*375},denormW:function(e){return e.w*500},denormH:function(e){return e.h*375}}}},"@VERSION@",{requires:[],optional:[]});
